# Pad效果器和预设系统使用指南

## 版本记录

| 版本 | 日期 | 变更内容 | 变更人 |
|------|------|----------|--------|
| 1.0 | 2025-12-18 | 初始版本 - Per-pad效果器和预设系统 | AI Assistant |

---

## 功能概述

Drum Pad现在支持为每个pad（打击垫）独立配置音色和效果器，以及创建、保存、切换预设。

### 核心功能
1. **Per-Pad效果器** - 每个pad可以有独立的混响和延迟效果
2. **独立音量控制** - 每个pad可以设置独立的音量
3. **预设系统** - 保存和加载完整的16个pad配置
4. **实时预览** - 编辑时可以实时试听效果
5. **导入/导出** - 分享和备份预设配置

---

## 使用教程

### 1. 编辑单个Pad的效果器

#### 方式一：长按进入编辑
1. 在打鼓界面，**长按**任意一个pad（约0.5秒）
2. 会看到蓝色边框指示，松手后弹出效果器编辑面板
3. 在编辑面板中调整参数：
   - **音量滑块**: 控制该pad的独立音量（0-100%）
   - **混响混合度**: 控制混响效果强度（0-100%）
   - **混响类型**: 选择混响预设（Small Room, Large Hall, Cathedral等）
   - **延迟混合度**: 控制延迟效果强度（0-100%）
   - **延迟反馈**: 控制延迟重复次数（0-100%）
   - **延迟时间**: 控制延迟间隔（0.05-2.0秒）

#### 实时试听
- 调整参数后，点击**"试听效果"**按钮
- 系统会播放该pad的音色，立即听到效果变化
- 可以反复调整和试听，直到满意为止

#### 快速应用预设
- 点击**"预设"**按钮，选择：
  - **默认设置** - 清爽原声，无特效
  - **摇滚风格** - 强劲混响和延迟
  - **爵士风格** - 温暖自然的混响

#### 保存更改
- 点击**"完成"**按钮保存更改
- 点击**"取消"**按钮放弃更改
- 点击**"重置"**按钮恢复为默认设置

---

### 2. 预设管理

#### 快速切换预设
1. 在打鼓界面顶部，找到音量滑块旁边的**"预设"**按钮
2. 点击打开预设菜单
3. 看到预设列表：
   - **Default Kit** ⭐ - 清爽原声鼓组（内置）
   - **Rock Kit** ⭐ - 强劲有力的摇滚鼓组（内置）
   - **Jazz Kit** ⭐ - 温暖自然的爵士鼓组（内置）
   - 你的自定义预设...
4. 点击任意预设名称立即应用
5. 当前激活的预设会显示✓标记

#### 保存当前配置为新预设
1. 在预设菜单中选择**"管理预设"**
2. 进入预设管理界面
3. 在**"我的预设"**区域，点击右上角的**+**按钮
4. 输入预设名称（必填）
5. 输入预设描述（可选）
6. 点击**"保存"**按钮
7. 新预设会出现在列表中

#### 删除自定义预设
1. 进入预设管理界面
2. 在**"我的预设"**区域，找到要删除的预设
3. 向左滑动该预设行
4. 点击红色的**"删除"**按钮
5. 确认删除操作

**注意**: 内置预设（带⭐标记）不可删除

---

### 3. 导入/导出预设

#### 导出预设（分享给他人）
1. 进入预设管理界面
2. 找到要导出的预设
3. 向左滑动该预设行
4. 点击蓝色的**"导出"**按钮
5. 在弹出的界面中看到JSON代码
6. 点击**"复制到剪贴板"**按钮
7. 将复制的内容发送给他人（通过邮件、消息等）

#### 导入预设（接收他人分享）
1. 进入预设管理界面
2. 在**"导入/导出"**区域，点击**"从JSON导入预设"**
3. 粘贴收到的JSON代码
4. 点击**"导入"**按钮
5. 导入成功后，新预设会出现在**"我的预设"**列表中

#### 导出当前配置
1. 进入预设管理界面
2. 在**"导入/导出"**区域，点击**"导出当前配置"**
3. 查看和复制当前所有16个pad的配置

---

## 高级技巧

### 创建风格化预设

#### 摇滚重鼓风格
```text
KICK (底鼓):
- 音量: 100%
- 混响: 40% (Large Hall)
- 延迟: 20%

SNARE (军鼓):
- 音量: 95%
- 混响: 45% (Plate)
- 延迟: 30%

镲片组:
- 音量: 85%
- 混响: 35% (Large Hall)
- 延迟: 15%
```

#### 爵士柔和风格
```text
KICK (底鼓):
- 音量: 65%
- 混响: 15% (Small Room)
- 延迟: 5%

SNARE (军鼓):
- 音量: 70%
- 混响: 22% (Medium Room)
- 延迟: 10%

Hi-Hat (踩镲):
- 音量: 75%
- 混响: 25% (Medium Room)
- 延迟: 8%
```

#### 电子音乐风格
```text
所有Pad:
- 混响: 15-25% (Plate/Digital)
- 延迟: 40-60% (快速重复)
- 延迟时间: 0.125秒 (1/8音符)
```

---

## 技术细节

### 效果器参数说明

#### 混响效果器
- **混合度 (Dry/Wet Mix)**: 控制混响声音的比例
  - 0% = 完全干声（无混响）
  - 100% = 完全湿声（纯混响）
  - 推荐: 5-40%

- **混响预设类型**:
  - Small Room - 小房间，短混响
  - Medium Room - 中等房间
  - Large Room - 大房间
  - Medium Hall - 中等音乐厅
  - Large Hall - 大音乐厅，长混响
  - Plate - 板式混响，明亮
  - Cathedral - 教堂，超长混响

#### 延迟效果器
- **混合度**: 控制延迟声音的比例
  - 0% = 无延迟
  - 100% = 纯延迟
  - 推荐: 10-30%

- **反馈量**: 控制延迟重复的次数
  - 0% = 只重复1次
  - 100% = 无限重复（慎用）
  - 推荐: 10-40%

- **延迟时间**: 控制延迟间隔
  - 0.125秒 = 1/8音符（120 BPM时）
  - 0.25秒 = 1/4音符
  - 0.5秒 = 1/2音符
  - 推荐: 根据歌曲速度调整

### 性能优化说明

系统采用**动态参数切换**方案：
- 共享全局效果器节点（节省资源）
- 播放时动态切换效果器参数
- 确保低延迟响应（<10ms切换时间）
- 支持实时编辑和预览

---

## 常见问题

### Q1: 为什么长按pad没有反应？
**A**: 确保长按时间足够长（约0.5秒），会看到蓝色边框指示。

### Q2: 效果器调整后听不到变化？
**A**: 
1. 检查pad的**效果器开关**是否启用（编辑面板右上角）
2. 检查pad是否被**静音**
3. 尝试增大效果器混合度

### Q3: 切换预设后声音变化很大？
**A**: 这是正常的，不同预设有不同的效果器和音量设置。可以重新调整到你喜欢的效果。

### Q4: 可以为16个pad设置完全不同的效果器吗？
**A**: 可以！每个pad都支持独立的效果器参数和音量。

### Q5: 预设保存在哪里？
**A**: 预设保存在应用的本地存储中（UserDefaults），卸载应用会丢失。建议导出重要预设备份。

### Q6: 可以恢复到出厂设置吗？
**A**: 可以，应用预设菜单中的**"Default Kit"**即为出厂默认设置。

---

## 故障排除

### 问题：点击pad没有声音
**检查步骤**:
1. 检查设备音量
2. 检查pad是否被静音（音量为0或静音开关打开）
3. 检查应用音频引擎是否正常启动

### 问题：效果器参数保存失败
**解决方案**:
1. 确保点击了**"完成"**按钮
2. 检查存储空间是否充足
3. 重启应用重试

### 问题：导入预设失败
**检查**:
1. 确保JSON格式正确（完整复制）
2. 检查是否包含所有必需字段
3. 尝试重新导出后再导入

---

## 联系支持

如果遇到问题或有功能建议，请通过以下方式联系：
- 提交Issue到GitHub仓库
- 发送邮件至support@drumpad.example.com

---

## 版权信息

© 2025 Drum Pad Team. All rights reserved.
